<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Информатика: info.edu</title>
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #0f172a;
            --success: #10b981;
            --error: #ef4444;
            --accent: #fbbf24;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
        }

        /* ЭМБЛЕМА */
        .logo-circle {
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            color: var(--primary);
            border: 5px solid var(--accent);
        }
        .logo-circle b { font-size: 1.3em; line-height: 1; }
        .logo-circle span { font-size: 0.9em; color: #64748b; font-weight: bold; margin-top: 5px; }

        /* WELCOME SCREEN */
        #welcome-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            color: white;
            transition: 0.6s ease;
        }

        .welcome-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        input[type="text"] {
            width: 100%;
            padding: 18px;
            margin: 20px 0;
            border-radius: 15px;
            border: none;
            font-size: 1.1em;
            text-align: center;
            outline: none;
        }

        /* MAIN CONTENT */
        .main-content {
            display: none;
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
        }

        #timer-box {
            position: sticky;
            top: 20px;
            float: right;
            background: #1e293b;
            color: var(--accent);
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 1.4em;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .quiz-card {
            background: var(--card);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 2px solid transparent;
        }

        .topic-badge {
            display: none; /* Тест кезінде жасыру */
            font-size: 0.75em;
            font-weight: 800;
            color: var(--primary);
            text-transform: uppercase;
            background: #eef2ff;
            padding: 5px 12px;
            border-radius: 6px;
            margin-bottom: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 14px;
            margin: 10px 0;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.2s;
        }
        .option:hover { background: #f8fafc; border-color: var(--primary); }
        .option input { margin-right: 15px; transform: scale(1.2); }

        /* RESULTS */
        #result-area {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            margin-bottom: 40px;
            border: 5px solid var(--primary);
        }

        .correct-card { border-color: var(--success) !important; background: #f0fdf4 !important; }
        .wrong-card { border-color: var(--error) !important; background: #fef2f2 !important; }
        .show-topic { display: inline-block !important; }

        #submit-btn {
            width: 100%;
            background: var(--primary);
            color: white;
            padding: 22px;
            border: none;
            border-radius: 18px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div id="welcome-screen">
    <div class="welcome-card">
        <div class="logo-circle">
            <b>Жанболат</b>
            <span>info.edu</span>
        </div>
        <h2>Информатика Тесті</h2>
        <p>85 сұрақ | 100 минут</p>
        <input type="text" id="userName" placeholder="Аты-жөніңізді жазыңыз..." autocomplete="off">
        <button onclick="startQuiz()" style="background:var(--success); color:white; border:none; padding:18px; border-radius:15px; width:100%; font-weight:bold; cursor:pointer;">Тестті бастау</button>
    </div>
</div>

<div class="main-content" id="mainContent">
    <div id="timer-box">100:00</div>
    <h2 id="userGreeting" style="margin-bottom: 30px;">Сәттілік!</h2>

    <div id="result-area">
        <h2 id="resNameText">Нәтиже</h2>
        <div style="font-size: 4em; font-weight: 900; color: var(--primary);" id="finalScore">0 / 85</div>
        <p>Төменде қателер мен тақырыптар бойынша талдау берілген</p>
        <button onclick="location.reload()" style="padding:12px 25px; cursor:pointer; border-radius:10px;">Қайта бастау</button>
    </div>

    <form id="quizForm">
        <div id="quiz-container"></div>
        <button type="button" id="submit-btn" onclick="finishQuiz()">Тестті аяқтау</button>
    </form>
</div>

<script>
const rawQuestions = [
    // ТАҚЫРЫП 1: Ақпарат сипаты және қасиеті
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпараттың қазіргі уақытқа сәйкес келу қасиеті қалай аталады?", o: ["Толықтығы", "Өзектілігі (айқындылығы)", "Түсініктілігі", "Қолжетімділігі"], a: 1 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпараттың шынайы жағдайды бейнелеуі және оның дұрыстығы қай қасиетке жатады?", o: ["Объективтілігі", "Құндылығы", "Анықтылығы (сенімділігі)", "Қысқалығы"], a: 2 },
    { t: "Ақпарат сипаты және қасиеті", q: "Шешім қабылдауға жеткілікті ақпараттың жиынтығы қалай аталады?", o: ["Толықтығы", "Объективтілігі", "Түсініктілігі", "Бағалылығы"], a: 0 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпаратның адамның жеке пікіріне немесе сезіміне тәуелсіз болуы:", o: ["Анықтылығы", "Объективтілігі", "Өзектілігі", "Түсініктілігі"], a: 1 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпараттың маңызды мәселені шешуге тигізетін пайдасы қай қасиетті сипаттайды?", o: ["Қолжетімділігі", "Құндылығы (бағалылығы)", "Толықтығы", "Анықтылығы"], a: 1 },
    { t: "Ақпарат сипаты және қасиеті", q: "Егер ақпарат қабылдаушыға белгілі тілде жеткізілсе, бұл қай қасиеттің орындалғаны?", o: ["Өзектілігі", "Түсініктілігі", "Объективтілігі", "Қысқалығы"], a: 1 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпаратты қабылдау тәсіліне қарай қандай түрлерге бөлінеді?", o: ["Мәтіндік, сандық, графиктік", "Көру, есту, иіскеу, дәм сезу, сипап сезу", "Ғылыми, қоғамдық, техникалық", "Аналогтық және цифрлық"], a: 1 },
    { t: "Ақпарат сипаты және қасиеті", q: "Математикалық формулалар арқылы берілген ақпараттың түрі қандай?", o: ["Мәтіндік", "Дыбыстық", "Сандық", "Видеоақпарат"], a: 2 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпараттың мазмұнында артық сөздің болмауы және нақтылығы қай сипатқа жатады?", o: ["Қысқалығы", "Қолжетімділігі", "Түсініктілігі", "Толықтығы"], a: 0 },
    { t: "Ақпарат сипаты және қасиеті", q: "Ақпаратты алу мүмкіндігі мен оны пайдалану еркіндігі қалай аталады?", o: ["Құндылығы", "Қолжетімділігі", "Объективтілігі", "Өзектілігі"], a: 1 },

    // ТАҚЫРЫП 2: Компьютер конфигурациясы
    { t: "Компьютер конфигурациясы", q: "Процессордың жылдамдығы қандай бірлікпен өлшенеді?", o: ["Байт", "Герц", "Пиксель"], a: 1 },
    { t: "Компьютер конфигурациясы", q: "Ақпаратты тұрақты сақтауға арналған ең жылдам құрылғы:", o: ["RAM", "SSD", "HDD"], a: 1 },
    { t: "Компьютер конфигурациясы", q: "Компьютердің конфигурациясы дегеніміз не?", o: ["Тек монитордың түсі", "Орнатылған ойындардың тізімі", "Жүйелік блоктың ішіндегі құрылғылар"], a: 2 },
    { t: "Компьютер конфигурациясы", q: "Процессордың бір уақытта орындай алатын есептеулер санын не анықтайды?", o: ["Ядро саны", "Диск көлемі", "Монитордың диагоналі"], a: 0 },
    { t: "Компьютер конфигурациясы", q: "Бейнекартаның (GPU) негізгі міндеті:", o: ["Дыбыс шығару", "Экрандағы кескіндер мен графиканы өңдеу", "Мәтін теру"], a: 1 },
    { t: "Компьютер конфигурациясы", q: "Компьютердің қуат алуын және кернеуді реттейтін құрылғы:", o: ["Кулер", "Қорек блогы (Power Supply)", "Процессор"], a: 1 },
    { t: "Компьютер конфигурациясы", q: "Процессорды қызып кетуден қорғайтын салқындату жүйесі:", o: ["Кулер (желдеткіш)", "Модем", "Сканер"], a: 0 },
    { t: "Компьютер конфигурациясы", q: "Компьютер өшкенде ішіндегі ақпарат жойылып кететін жады түрі:", o: ["Қатқыл диск", "Жедел жады (RAM)", "Флешка"], a: 1 },
    { t: "Компьютер конфигурациясы", q: "Қазіргі кездегі жедел жадының (RAM) стандарты:", o: ["DDR4 / DDR5", "HDD / SSD", "MP3 / MP4"], a: 0 },
    { t: "Компьютер конфигурациясы", q: "Компьютердің өнімділігіне (жылдамдығына) ең көп әсер ететін үштік:", o: ["Монитор, тышқан, пернетақта", "Процессор, Жедел жады, Видеокарта", "Принтер, Сканер, Колонка"], a: 1 },

    // ТАҚЫРЫП 3: Электронды кестелер
    { t: "Электронды кестелер", q: "Электрондық кестенің ең кіші элементі қалай аталады?", o: ["Баған", "Жол", "Ұяшық"], a: 2 },
    { t: "Электронды кестелер", q: "Кестедегі бағандар қалай белгіленеді?", o: ["Сандармен (1, 2, 3...)", "Латын әріптерімен (A, B, C...)", "Арнайы таңбалармен"], a: 1 },
    { t: "Электронды кестелер", q: "Ұяшықтың адресі қалай жазылады?", o: ["Әріп пен санның қиылысуы (мысалы, B5)", "Тек санмен", "Тек әріппен"], a: 0 },
    { t: "Электронды кестелер", q: "Электрондық кестеде формула қай таңбадан басталады?", o: ["Плюс (+)", "Теңдік (=)", "Жақша"], a: 1 },
    { t: "Электронды кестелер", q: "Бірнеше ұяшықтар жиынтығы қалай аталады (мысалы, A1:C5)?", o: ["Блок (диапазон)", "Кесте ортасы", "Жолдар тізбегі"], a: 0 },
    { t: "Электронды кестелер", q: "MS Excel бағдарламасында құрылған файлдың кеңейтілімі қандай?", o: [".docx", ".xlsx", ".pptx"], a: 1 },
    { t: "Электронды кестелер", q: "Сандардың қосындысын есептейтін функция:", o: ["AVERAGE", "MIN", "SUM (СУММ)"], a: 2 },
    { t: "Электронды кестелер", q: "Кестедегі жолдар қалай белгіленеді?", o: ["Әріптермен", "Сандармен", "Түстермен"], a: 1 },
    { t: "Электронды кестелер", q: "Кестедегі мәліметтерді көрнекі түрде бейнелеу үшін не қолданылады?", o: ["Диаграмма", "Сызғыш", "Мәтіндік блок"], a: 0 },
    { t: "Электронды кестелер", q: "Егер ұяшықта «####» белгісі шықса, бұл нені білдіреді?", o: ["Формулада қате бар", "Ұяшық бос", "Сан ұяшыққа сыймай тұр (ен тар)"], a: 2 },

    // ТАҚЫРЫП 4: Бағдарламалық жасақтама
    { t: "Бағдарламалық жасақтама", q: "Бағдарламалық жасақтаманың негізгі неше түрі бар?", o: ["2 түрі", "3 (Жүйелік, қолданбалы, бағдарламалау)", "4 түрі"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Операциялық жүйе (ОЖ) БЖ-ның қай түріне жатады?", o: ["Қолданбалы", "Жүйелік", "Утилиттер"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Нақты бір тапсырмаларды орындауға арналған БЖ:", o: ["Қолданбалы", "Бағдарламалау құралдары", "Жүйелік"], a: 0 },
    { t: "Бағдарламалық жасақтама", q: "Ең танымал операциялық жүйені көрсетіңіз:", o: ["Microsoft Word", "Windows", "Google Chrome"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Драйвер дегеніміз не?", o: ["Ойындар жиынтығы", "Құрылғыларды басқару бағдарламасы", "Вирусқа қарсы"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Мәтін өңдеуге арналған қолданбалы бағдарлама:", o: ["Microsoft Word", "Microsoft Excel", "Adobe Photoshop"], a: 0 },
    { t: "Бағдарламалық жасақтама", q: "Антивирустық бағдарламалар БЖ-ның қай түріне кіреді?", o: ["Ойындарға", "Жүйелік (утилиттерге)", "Бағдарламалау тілдеріне"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Бағдарламалау тілдері (Python, C++) не үшін қолданылады?", o: ["Жаңа бағдарламалар жазу үшін", "Кино көру үшін", "Интернетке шығу үшін"], a: 0 },
    { t: "Бағдарламалық жасақтама", q: "Архиваторлар (WinRAR) не үшін қажет?", o: ["Файлдар көлемін кішірейту", "Компьютерді өшіру", "Сурет салу"], a: 0 },
    { t: "Бағдарламалық жасақтама", q: "Браузерлер (Chrome, Opera) қандай бағдарламаларға жатады?", o: ["Жүйелік", "Қолданбалы", "Қызметтік"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Компьютер іске қосылғанда ең бірінші жүктелетін бағдарлама:", o: ["Paint", "Операциялық жүйе", "Калькулятор"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Интерфейс дегеніміз не?", o: ["Корпус", "Пайдаланушы мен компьютер арасындағы қарым-қатынас", "Жады"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "Графикалық редакторды көрсетіңіз:", o: ["Paint", "WinRAR", "Access"], a: 0 },
    { t: "Бағдарламалық жасақтама", q: "Тегін таратылатын бағдарламалар қалай аталады?", o: ["Shareware", "Freeware", "Adware"], a: 1 },
    { t: "Бағдарламалық жасақтама", q: "BIOS бағдарламасы қайда сақталады?", o: ["Қатқыл дискіде", "Тұрақты жадыда (ROM)", "Флешкада"], a: 1 },

    // ТАҚЫРЫП 5: Желі және өткізу қабілеті
    { t: "Желі және өткізу қабілеті", q: "Желінің өткізу қабілетін өлшеудің стандартты бірлігі:", o: ["Гбайт/с", "бит/с", "Бод"], a: 1 },
    { t: "Желі және өткізу қабілеті", q: "1 Кбит/с мәнін битпен есептегендегі ең дәл көрсеткіш:", o: ["1000 бит", "1024 бит", "8192 бит"], a: 1 },
    { t: "Желі және өткізу қабілеті", q: "Деректерді тасымалдауға ең үлкен физикалық кедергі келтіретін фактор:", o: ["Байланыс ортасы мен сигналдың өшуі", "Монитордың жиілігі", "Файлдардың атауы"], a: 0 },
    { t: "Желі және өткізу қабілеті", q: "Bandwidth пен Throughput арасындағы айырмашылық:", o: ["Айырмашылық жоқ", "Bandwidth — теориялық макс, Throughput — нақты көлем", "Throughput — физикалық, Bandwidth — БЖ"], a: 1 },
    { t: "Желі және өткізу қабілеті", q: "Қай технология электромагниттік кедергілерге (EMI) ең төзімді?", o: ["UTP кабель", "STP кабель", "Оптикалық талшық (Fiber)"], a: 2 },
    { t: "Желі және өткізу қабілеті", q: "Желілік пакеттің барып, кері қайту уақыты (RTT):", o: ["Кідіріс (Latency/Ping)", "Деградация", "Шина жылдамдығы"], a: 0 },
    { t: "Желі және өткізу қабілеті", q: "Өткізу қабілеті 10 Мбит/с арна арқылы 100 Мбит файлды жүктеу уақыты:", o: ["1 секунд", "10 секунд", "12,5 секунд"], a: 1 },
    { t: "Желі және өткізу қабілеті", q: "Wi-Fi стандартында өткізу қабілетінің төмендеуіне негізгі себеп:", o: ["Физикалық кедергілер мен интерференция", "Ауа ылғалдылығы", "Компьютер дизайны"], a: 0 },
    { t: "Желі және өткізу қабілеті", q: "Желілік трафик терминінің ең дәл анықтамасы:", o: ["Уақыт аралығында өткен пакеттер жиынтығы", "Пайдаланушылар лимиті", "Кернеу деңгейі"], a: 0 },
    { t: "Желі және өткізу қабілеті", q: "Пропускная способность терминінің қазақша баламасы:", o: ["Желілік топология", "Өткізу қабілеті", "Протокол"], a: 1 },

    // ТАҚЫРЫП 6: Топология және құрылғылар
    { t: "Желілік топология және құрылғылар", q: "Бір ғимарат ішіндегі компьютерлерді біріктіретін желі түрі:", o: ["WAN", "LAN", "PAN"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Цифрлық сигналды аналогтық сигналға айналдыратын құрылғы:", o: ["Роутер", "Модем", "Хаб"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Желідегі әр құрылғының бірегей физикалық адресі:", o: ["IP-адрес", "MAC-адрес", "URL"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Компьютерлердің желіде орналасу схемасы қалай аталады?", o: ["Топология", "Протокол", "Интерфейс"], a: 0 },
    { t: "Желілік топология және құрылғылар", q: "Деректерді тасымалдау ережелері мен стандарттары:", o: ["Протокол", "Провайдер", "Домен"], a: 0 },
    { t: "Желілік топология және құрылғылар", q: "Басқа компьютерлерге өз ресурстарын ұсынатын компьютер:", o: ["Клиент", "Сервер", "Свитч"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Жұлдызша (Star) топологиясының басты кемшілігі:", o: ["Компьютер бұзылса бәрі өшеді", "Орталық құрылғы бұзылса бәрі тоқтайды", "Кабель аз жұмсалады"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Әлемдік деңгейдегі ең ірі жаһандық желі:", o: ["Intranet", "Internet", "Ethernet"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Веб-парақшаларды қарауға арналған хаттама:", o: ["FTP", "HTTP / HTTPS", "SMTP"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "IP-адрестің (IPv4) дұрыс жазылу үлгісі:", o: ["192.168.1.256", "172.16.254.1", "255.255.0.1.5"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "WAN желісінде пакеттерге ең тиімді жолды таңдайтын құрылғы:", o: ["Маршрутизатор (Router)", "Көпір", "Қайталағыш"], a: 0 },
    { t: "Желілік топология және құрылғылар", q: "Файлдарды тасымалдауға арналған арнайы хаттама:", o: ["FTP", "DNS", "IP"], a: 0 },
    { t: "Желілік топология және құрылғылар", q: "IP-адрестерді мәтіндік атауға айналдыратын қызмет:", o: ["DHCP", "DNS", "ICMP"], a: 1 },
    { t: "Желілік топология және құрылғылар", q: "Желілік картаның негізгі қызметі:", o: ["Компьютерді желіге физикалық қосу", "Вирустан қорғау", "Жылдамдық арттыру"], a: 0 },
    { t: "Желілік топология және құрылғылар", q: "Сымсыз желілік байланыс стандарты:", o: ["Bluetooth", "Wi-Fi", "Екеуі де жатады"], a: 2 },

    // ТАҚЫРЫП 7: DNS және Домендер
    { t: "DNS және Домендер", q: "DNS-тің басты қызметі қандай?", o: ["Файлдарды жүктеу", "Доменді IP-ге айналдыру", "Вирустан қорғау"], a: 1 },
    { t: "DNS және Домендер", q: "DNS иерархиясындағы ең жоғарғы деңгей:", o: ["Түбірлік (Root)", "Бірінші деңгей", "Ішкі домен"], a: 0 },
    { t: "DNS және Домендер", q: ".kz, .com домендері қай деңгейге жатады?", o: ["Төменгі", "Жоғарғы (TLD)", "Екінші"], a: 1 },
    { t: "DNS және Домендер", q: "bilim.edu.kz мекенжайындағы екінші деңгейлі домен:", o: ["bilim", "edu", "kz"], a: 1 },
    { t: "DNS және Домендер", q: "Мемлекеттік домендер (ccTLD) қалай аталады?", o: ["gTLD", "ccTLD", "sTLD"], a: 1 },
    { t: "DNS және Домендер", q: "DNS-сервер жылдамдық үшін ақпаратты қайда сақтайды?", o: ["Кэш-жадында (Cache)", "Қатқыл дискіде", "Жедел жадында"], a: 0 },
    { t: "DNS және Домендер", q: "www.google.com мекенжайындағы www бөлігі:", o: ["Домен аты", "Субдомен (3-деңгей)", "Хаттама"], a: 1 },
    { t: "DNS және Домендер", q: "Егер DNS сервері істен шықса не болады?", o: ["Интернет өшеді", "Сайт атымен ашылмайды", "Компьютер өшеді"], a: 1 },
    { t: "DNS және Домендер", q: "DNS A жазбасы (A record) не үшін жауапты?", o: ["Доменді IPv4-ке бағыттау", "Пошта серверін анықтау", "Иесін көрсету"], a: 0 },
    { t: "DNS және Домендер", q: "MX жазбасы (Mail Exchange) не үшін қолданылады?", o: ["Веб-сайт ашу", "Пошта серверін анықтау", "Жылдамдық арттыру"], a: 1 },
    { t: "DNS және Домендер", q: "Білім беру мекемелеріне арналған домен:", o: [".com", ".edu", ".net"], a: 1 },
    { t: "DNS және Домендер", q: "Бір IP-ге бірнеше домен беруге мүмкіндік беретін жазба:", o: ["CNAME", "NS", "SOA"], a: 0 },
    { t: "DNS және Домендер", q: "DNS сұраныстары қай хаттама арқылы жүреді?", o: ["TCP", "UDP", "HTTP"], a: 1 },
    { t: "DNS және Домендер", q: "Домендік есімдерде рұқсат етілмеген таңба:", o: ["Дефис (-)", "Төменгі сызық (_)", "Нүкте (.)"], a: 1 },
    { t: "DNS және Домендер", q: "FQDN дегеніміз не?", o: ["Қысқа аты", "Түбірге дейінгі толық атау", "Құпия сөз"], a: 1 }
];

// Сұрақтарды араластыру функциясы
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

const quizData = shuffle([...rawQuestions]);
let timeLeft = 6000; 
let timerInterval;

function startQuiz() {
    const name = document.getElementById('userName').value;
    if (!name) return alert("Атыңызды енгізіңіз!");
    
    document.getElementById('welcome-screen').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('welcome-screen').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
    }, 500);

    document.getElementById('userGreeting').innerText = `Сәттілік, ${name}! Жалпы 78 сұрақ.`;
    renderQuestions();
    timerInterval = setInterval(updateTimer, 1000);
}

function renderQuestions() {
    const container = document.getElementById('quiz-container');
    quizData.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'quiz-card';
        card.id = `q-card-${index}`;
        
        let optionsHtml = item.o.map((opt, i) => `
            <label class="option">
                <input type="radio" name="q${index}" value="${i}">
                ${opt}
            </label>
        `).join('');

        card.innerHTML = `
            <div class="topic-badge" id="topic-${index}">${item.t}</div>
            <div style="font-weight:700; font-size:1.1em; margin-bottom:15px;">${index + 1}. ${item.q}</div>
            ${optionsHtml}
            <div id="feedback-${index}" style="margin-top:15px; font-weight:bold;"></div>
        `;
        container.appendChild(card);
    });
}

function updateTimer() {
    timeLeft--;
    let m = Math.floor(timeLeft / 60);
    let s = timeLeft % 60;
    document.getElementById('timer-box').innerText = `${m}:${s < 10 ? '0'+s : s}`;
    if (timeLeft <= 0) finishQuiz();
}

function finishQuiz() {
    clearInterval(timerInterval);
    let score = 0;
    
    quizData.forEach((item, index) => {
        const selected = document.querySelector(`input[name="q${index}"]:checked`);
        const card = document.getElementById(`q-card-${index}`);
        const topicBadge = document.getElementById(`topic-${index}`);
        const feedback = document.getElementById(`feedback-${index}`);

        // Тақырыпты енді көрсетеміз
        topicBadge.classList.add('show-topic');
        
        if (selected && parseInt(selected.value) === item.a) {
            score++;
            card.classList.add('correct-card');
        } else {
            card.classList.add('wrong-card');
            const correctText = item.o[item.a];
            feedback.innerHTML = `<span style="color:var(--error)">Дұрыс жауап: ${correctText}</span>`;
        }
    });

    document.getElementById('result-area').style.display = 'block';
    document.getElementById('resNameText').innerText = `${document.getElementById('userName').value}, нәтижеңіз:`;
    document.getElementById('finalScore').innerText = `${score} / ${quizData.length}`;
    document.getElementById('submit-btn').style.display = 'none';
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>